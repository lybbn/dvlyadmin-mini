import{d as e}from"./destr.WfmzGWA8.js";import{d as r,a as t}from"./deep-pick-omit.DP_A4OSP.js";function i(e,{storage:i,serializer:a,key:s,debug:o,pick:n,omit:l,beforeHydrate:c,afterHydrate:u},d,f=!0){try{f&&(null==c||c(d));const o=i.getItem(s);if(o){const i=a.deserialize(o),s=n?r(i,n):i,c=l?t(s,l):s;e.$patch(c)}f&&(null==u||u(d))}catch(y){}}function a(e,{storage:i,serializer:a,key:s,debug:o,pick:n,omit:l}){try{const o=n?r(e,n):e,c=l?t(o,l):o,u=a.serialize(c);i.setItem(s,u)}catch(c){}}var s=function(r={}){return function(t){var s;!function(e,r,t){const{pinia:s,store:o,options:{persist:n=t}}=e;if(!n)return;if(!(o.$id in s.state.value)){const e=s._s.get(o.$id.replace("__hot:",""));return void(e&&Promise.resolve().then((()=>e.$persist())))}const l=(Array.isArray(n)?n:!0===n?[{}]:[n]).map(r);o.$hydrate=({runHooks:r=!0}={})=>{l.forEach((t=>{i(o,t,e,r)}))},o.$persist=()=>{l.forEach((e=>{a(o.$state,e)}))},l.forEach((r=>{i(o,r,e),o.$subscribe(((e,t)=>a(t,r)),{detached:!0})}))}(t,(i=>{var a,s,o,n,l,c,u;return{key:(r.key?r.key:e=>e)(null!=(a=i.key)?a:t.store.$id),debug:null!=(o=null!=(s=i.debug)?s:r.debug)&&o,serializer:null!=(l=null!=(n=i.serializer)?n:r.serializer)?l:{serialize:e=>JSON.stringify(e),deserialize:r=>e(r)},storage:null!=(u=null!=(c=i.storage)?c:r.storage)?u:window.localStorage,beforeHydrate:i.beforeHydrate,afterHydrate:i.afterHydrate,pick:i.pick,omit:i.omit}}),null!=(s=r.auto)&&s)}}();export{s as i};
